<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regular Expressions - Fenaya Cecilly Nababan</title>    

   
</head>
   
                <div class="flex-col mb-16">
                    <p class="text-neutral-900 font-bold text-3xl text-center mb-3 mt-10">Regular Expressions</p>
                </div>

                <div class="w-full lg:w-full lg:mx-auto">
                    <div class="w-full px-4 mb-8">
                        <label for="pw">Password</label>
                        <input type="text" id="inputPW" placeholder="Ketikkan Password " />
                        <p id="validasiPW" class="mt-2"></p>
                    </div>
                    
                    <div class="w-full px-4 mb-8">
                        <label for="ttl">Tanggal Lahir</label>
                        <input type="text" id="inputTTL" placeholder="Ketikkan tanggal lahir" />
                        <p id="validasiTTL" class="mt-2"></p>
                    </div>

                    <div class="w-full px-4 mb-8">
                        <label for="email">Email</label>
                        <input type="text" id="inputEMAIL" placeholder="Ketikkan alamat Email" />
                        <p id="validasiEMAIL" class="mt-2"></p>
                    </div>

                    <div class="w-full px-4 mb-8">
                        <label for="url">Validasi URL</label>
                        <input type="text" id="inputURL" placeholder="Ketikkan alamat URL disini" />
                        <p id="validasiURL" class="mt-2"></p>
                    </div>

                    <div class="w-full px-4 mb-8">
                        <label for="user">Nama Pengguna</label>
                        <input type="text" id="inputUSER" placeholder="Masukkan nama pengguna" />
                        <p id="validasiUSER" class="mt-2"></p>
                    </div>
                    
                    
                </div>

              </div>
            </div>
          </div>
          
          <script>

            let regexInputPW = document.getElementById("inputPW");
            let pwValidasi = document.getElementById("validasiPW");

            let regexInputTTL = document.getElementById("inputTTL");
            let ttlValidasi = document.getElementById("validasiTTL");

            let regexInputEMAIL = document.getElementById("inputEMAIL");
            let emailValidasi = document.getElementById("validasiEMAIL");

            let regexInputURL = document.getElementById("inputURL");
            let urlValidasi = document.getElementById("validasiURL");

            let regexInputUSER = document.getElementById("inputUSER");
            let userValidasi = document.getElementById("validasiUSER");


            const REGEX_PW = new RegExp("^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$");

            const REGEX_TTL = new RegExp("^(0[1-9]|[12][0-9]|3[01])-(0[1-9]|1[0-2])-(\\d{4})$");

            const REGEX_EMAIL = new RegExp("^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}");

            const REGEX_URL = new RegExp("^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$");

            const REGEX_USER = new RegExp("^[a-zA-Z0-9_-]{3,16}$");
            
            
            regexInputPW.addEventListener("input", () => {
                handleInput(regexInputPW, pwValidasi, REGEX_PW, "Password tidak memenuhi kebijakan keamanan. Pastikan password memiliki panjang minimal 8 karakter, mengandung huruf besar, huruf kecil, angka, dan karakter khusus.");
            });

            regexInputTTL.addEventListener("input", () => {
                handleInput(regexInputTTL, ttlValidasi, REGEX_TTL, "Invalid, gunakan format DD-MM-YYYY.");
            });

            regexInputEMAIL.addEventListener("input", () => { 
                handleInput(regexInputEMAIL, emailValidasi, REGEX_EMAIL, "Nomor telepon tidak valid. Pastikan Anda memasukkan nomor telepon dengan format yang benar.");
            });
            regexInputURL.addEventListener("input", () => {
                handleInput(regexInputURL, urlValidasi, REGEX_URL, "URL tidak valid. Pastikan Anda memasukkan URL dengan format yang benar.");
            });
            regexInputUSER.addEventListener("input", () => {
                handleInput(regexInputUSER, userValidasi, REGEX_USER, "Nama pengguna tidak valid. Nama pengguna hanya boleh terdiri dari huruf, angka, garis bawah (_) atau tanda hubung (-), dan panjangnya harus antara 3 hingga 16 karakter.");
            });
    
    
            function handleInput(inputElement, validationElement, regex, validationMessage) {
            if(inputElement.value === ""){
                validationElement.classList.remove("text-green-500");
                validationElement.classList.remove("text-red-500");
                inputElement.classList.add("focus:ring-indigo-600");
                inputElement.classList.remove("focus:ring-red-500");
                inputElement.classList.remove("focus:ring-green-500");
                inputElement.classList.add("ring-grey-300");
                inputElement.classList.remove("ring-red-500");
                inputElement.classList.remove("ring-green-500");
                validationElement.innerHTML = "";
            }else if(regex.test(inputElement.value)){
                validationElement.classList.add("text-green-500");
                validationElement.classList.remove("text-red-500");
                inputElement.classList.remove("focus:ring-indigo-600");
                inputElement.classList.remove("focus:ring-red-500");
                inputElement.classList.add("focus:ring-green-500");
                inputElement.classList.remove("ring-grey-300");
                inputElement.classList.remove("ring-red-500");
                inputElement.classList.add("ring-green-500");
                validationElement.innerHTML = "Valid";
            }else{
                validationElement.classList.add("text-red-500");
                validationElement.classList.remove("text-green-500");
                inputElement.classList.remove("focus:ring-indigo-600");
                inputElement.classList.remove("focus:ring-green-500");
                inputElement.classList.add("focus:ring-red-500");
                inputElement.classList.remove("ring-grey-300");
                inputElement.classList.remove("ring-green-500");
                inputElement.classList.add("ring-red-500");
                validationElement.innerHTML = validationMessage;
            }
        }
        </script>
    </body>
</html>